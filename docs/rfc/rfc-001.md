# RFC-001: Project Archi — The Intelligent AWS Architect

## 1. Metadata
* **Title:** RFC-001: Project Archi
* **Author:** Lua
* **Status:** Approved
* **Date:** 2026-02-21
* **Reviewers:** Engineering Team / Open Source Community

---

## 2. Abstract
**Project Archi** is an AI-native platform designed to automate architectural guidance based on the **AWS Well-Architected Framework**. By leveraging a **Multi-Cloud Hybrid Serverless** stack—utilizing **AWS Lambda**, **Gemini 3 Flash**, and **Supabase (pgvector)**—the system provides fact-grounded designs and Mermaid.js diagrams with zero operational costs during the prototype phase. The project is built using **Hexagonal Architecture** and **TDD** to ensure enterprise-grade reliability.

---

## 3. Context & Problem Statement
Architects currently spend excessive time manually validating cloud designs against vast documentation.
* **Current State:** Documentation cycles are slow, manual, and prone to human error.
* **Pain Point:** A significant "knowledge gap" exists between high-level requirements and technical AWS implementation, leading to sub-optimal cloud spending and security risks.
* **Vision:** Reduce architectural validation time from hours to seconds through AI-driven automation.

---

## 4. Goals and Non-Goals
* **Goals:**
    * Automate **Mermaid.js** diagram generation from natural language prompts.
    * Provide RAG-based answers grounded in official AWS documentation.
    * Implement a 100% automated **IaC (AWS CDK)** deployment pipeline.
    * Maintain a **TDD-first** workflow for 100% domain logic coverage.
* **Non-Goals:**
    * Direct deployment of resources into a user’s live AWS account.
    * Real-time monitoring of existing infrastructure.

---

## 5. Proposed Solution
A **Multi-Cloud Hybrid Serverless** application designed for speed and cost-efficiency.
* **Architecture Overview:** Based on a **Hexagonal Design**, isolating the core logic from infrastructure providers.
* **Key Components:**
    * **Orchestration:** **LangGraph.js** for stateful agentic loops.
    * **AI Engine:** **Gemini 3 Flash** for high-speed multimodal reasoning.
    * **Vector Store:** **Supabase** for semantic search.
* **User Experience:** A streaming chat interface built with **Next.js 15** and **TanStack Query v5**.

---

## 6. Detailed Design
* **Data Flow:**
    1. User query captured by **Next.js**.
    2. **TanStack Query** triggers an async request to **AWS Lambda**.
    3. Lambda retrieves context from **Supabase** via vector similarity.
    4. **LangGraph.js** executes a self-correction loop with **Gemini 3 Flash** to validate diagram syntax.
    5. Result is streamed back to the UI for real-time **Mermaid.js** rendering.
* **Security:**
    * **AWS Secrets Manager:** Centralized storage for API keys.
    * **IAM Roles:** Granular, least-privilege permissions for Lambda functions.

---

## 7. Trade-offs and Alternatives Considered
* **Alternative A: Amazon RDS for PostgreSQL.**
    * *Rejected:* High idle costs and VPC/NAT Gateway overhead for the prototype.
    * *Decision:* **Supabase**. Offers serverless-friendly connection pooling and a permanent free tier.
* **Alternative B: Python-based Backend.**
    * *Rejected:* Slower Lambda cold starts and lack of unified type-safety with the frontend.
    * *Decision:* **TypeScript**. Enables shared schemas and seamless **AWS CDK** integration.

---

## 8. Project Governance & Licensing
* **Distribution Model:** **Open Source (Public Repository)**. This ensures transparency and showcases technical leadership.
* **Licensing:** **MIT License**. Permissive licensing to encourage community learning.
* **Security Safeguards:** Mandatory **Secrets Masking** and use of environment-specific IAM boundaries.

---

## 9. Operational Excellence
* **Monitoring:** **AWS CloudWatch** for logs and **Vitest** for quality assurance.
* **Cost Estimate:** **$0.00/month** for the first 1M requests.
* **Rollback Plan:** **AWS CDK** stack versioning for instant infrastructure recovery.

---

## 10. Success Metrics
* **Metric 1:** Valid Mermaid diagram generation in under 15 seconds.
* **Metric 2:** 100% of resources managed via **AWS CDK**.
* **Metric 3:** Adherence to the **100/80/0 coverage rule** (100% Domain, 80% Application, 0% Infrastructure) using **Vitest**.
