# ADR-003: Implementation of Hexagonal and Screaming Architecture

**Status:** Accepted

**Date:** February 21, 2026

## 1. Context
The project requires a code structure that facilitates strict **TDD (Test-Driven Development)** and ensures that the core "Architectural Brain" is independent of infrastructure providers. This is vital for evolving into a Multi-Cloud tool (GCP/Azure) or swapping AI models (e.g., Gemini 3 Flash for Amazon Bedrock) without refactoring business logic.

## 2. Decision
Implement **Hexagonal Architecture (Ports & Adapters)** organized by **Screaming Features**.

## 3. Rationale
* **Domain Isolation for TDD:** By defining "Ports" (Interfaces), we can test the orchestration logic using mocks in Vitest. This ensures tests are fast, 100% reliable, and free of API costs.
* **Future-Proof Design:** The core logic is agnostic of specific cloud providers. Supporting Google Cloud or Azure in the future only requires a new "Adapter," leaving the core `domain` untouched.
* **Structural Clarity (Screaming):** The folder structure (e.g., `modules/diagram-generator`) reveals the system's intent immediately, making maintenance and onboarding intuitive.

## 4. Alternatives Considered
* **Traditional Layered Architecture (MVC):** Rejected due to the high risk of coupling business logic with infrastructure-specific libraries (e.g., AWS SDK).

## 5. Consequences
* **Positive:** Highly decoupled codebase ready for Multi-Cloud expansion and easy unit testing.
* **Negative:** Increased initial boilerplate code (interfaces, Zod schemas, and mappers) required to maintain the boundaries.
