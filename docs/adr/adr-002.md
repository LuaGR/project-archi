# ADR-002: Selection of Vector Database and Secure RAG Integration

**Status:** Accepted

**Date:** February 21, 2026

## 1. Context
To provide fact-grounded and accurate architectural advice, **Project Archi** requires a vector database to store and retrieve the AWS Well-Architected Framework documentation (RAG). The solution must be compatible with serverless environments, maintain a $0/month operational cost during the prototyping phase, and ensure that sensitive credentials are not leaked in the public open-source repository.

## 2. Decision
Utilize **Supabase (PostgreSQL + pgvector)** as the vector storage engine, managing all access credentials via **AWS Secrets Manager**.

## 3. Rationale
* **Multi-Cloud Portability:** By using the PostgreSQL standard with `pgvector`, we maintain an "RDS-Ready" architecture. This allows for a seamless future migration to Amazon Aurora if enterprise scaling is required.
* **Serverless Compatibility:** Supabase provides a robust connection pooling layer that prevents the "socket exhaustion" issues typically found when connecting AWS Lambda to traditional databases.
* **Cost Optimization:** Supabaseâ€™s generous free tier allows the project to operate at $0 OPEX, adhering to the Cost Optimization pillar of the AWS Well-Architected Framework.
* **Security Standards:** Using AWS Secrets Manager ensures that no database strings are committed to the public repository, demonstrating a professional "Security-First" mindset.

## 4. Alternatives Considered
* **Amazon OpenSearch Serverless:** Rejected due to a high minimum base cost (~$70/month), which is inefficient for an MVP/Portfolio project.
* **Pinecone:** Rejected to avoid vendor lock-in with a proprietary, non-SQL engine that limits data portability.

## 5. Consequences
* **Positive:** Zero operational costs and high flexibility for future AWS-native migrations.
* **Negative:** Introduces a dependency on an external provider (Supabase) outside the core AWS VPC, resulting in a negligible network latency that is acceptable for this use case.
